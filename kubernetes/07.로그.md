# 로그
## 로그 관리 방법
### 방법 1. PVC, NFS를 이용한 파일로 관리하기
개념
- PVC나, NFS를 이용해서 별도의 공간에 파드의 로그를 수집하는 방법

장점
- POD가 죽어도 로그가 남게 된다

단점
- PVC를 이용하면 여러개의 PVC에 로그가 분산되기 때문에 파악이 어렵다
- 로그가 많아질 경우 NFS의 입출력 성능이 로그가 기록되는 성능을 따라가지 못할 수 있다. 이게 병목이 되어 스레드를 점유하고, 성능에 안좋은 영향을 줄 수 있다. 

### 방법 2. 표준 입출력 방식을 이용하는 방법
개념
- 컨테이너 레벨에서 표준 입출력에 대한 로그 처리를 해준다. 

장점
- 별다른 설정없이 표준 입출력을 이용하면 된다

단점
- 다수의 파드가 있을 때 로그를 확인하기가 어렵다
- 파드가 종료되면 조회가 어렵다. 

표준 입출력을 사용하면서 외부 시스템으로 로그를 연동하려면 아래의 '컨테이너 레벨의 로깅' 을 참고한다

### 방법 3. 로그 관리 시스템을 이용하는 방법
개념
- 파드에 별도의 로그 수집을 처리하는 컨테이너를 실행하고, 이 프로그램이 로그를 수집 이후에 로그 저장소로 보낸다.

장점
- 애플리케이션에 영향을 주지 않고 로그를 수집할 수 있다 (사이드카 패턴)
- 로그 저장소에 수집된 로그는 시각화 도구를 이용해서 시각화 할 수 있다

단점
- 로그 관리 시스템을 구축해야하기 때문에 많은 수준의 자원이 필요하다

로그 수집기
- 경량 수집기: filebeat, fluentBit
- 수집,변형,다양한 입출력 지원: logstash, fluentD
- 쿠버네티스 환경에서는 파드에 부담을 줄이기 위해서 경량수집기를 사용하는게 더 좋을 수 있다.

### 방법 4. 컨테이너 레벨의 로깅
https://kubernetes.io/ko/docs/concepts/cluster-administration/logging/